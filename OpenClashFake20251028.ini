port: 7890
socks-port: 7891
redir-port: 7892
allow-lan: true
bind-address: "*"
mode: rule
log-level: info
external-controller: 0.0.0.0:9090
secret: ""

# ====================== DNS 2025-2026 ç»ˆææ— å‘ç‰ˆ ======================
dns:
  enable: true
  ipv6: false
  prefer-h3: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  query-timeout: 5
  fake-ip-filter:
    - '*.lan' - '*.local' - '*.home' - '*.localdomain'
    - 'stun.*' - 'time.*' - 'ntp.*' - 'localhost' - 'router.*'
    - '+.apple.com' - '+.icloud.com' - '+.mzstatic.com' - '+.mask.icloud.com' - '+.mask-h2.icloud.com'
    - '+.configuration.apple.com' - '+.push.apple.com' - '+.push-apple.com.akadns.net'
    - '+.aaplimg.com' - '+.cdn-apple.com' - '+.icloud-content.com' - '+.apple-cloudkit.com'
    - '+.app-attest.apple.com' - '+.ls.apple.com.akadns.net' - '+.itunes.apple.com'
    - '+.crashlytics.com' - '+.hcaptcha.com' - '+.msftconnecttest.com' - '+.msftncsi.com'
    - '+.ipv6.microsoft.com' - '+.identrust.com' - '+.digicert.com' - '+.ocsp.digicert.com'
    - '+.crl.identrust.com' - '+.akamaiedge.net' - '+.windowsupdate.com' - '+.update.microsoft.com'
    - '+.qq.com' - '+.weixin.qq.com' - '+.tencent.com' - '+.tenpay.com'
    - '+.alipay.com' - '+.alipayobjects.com'
    - '+.bilibili.com' - '+.bilivideo.com' - '+.hdslb.com' - '+.acgvideo.com'
    - '+.xiaomi.com' - '+.mi.com' - '+.miui.com'
    - '+.tailscale.com' - '+.zerotier.com' - '+.parsec.app'
    - '+.helpshift.com' - '+.sentry.io'
    - '+.epicgames.com' - '+.epicgames.dev'
    - '+.battle.net' - '+.blizzard.com' - '+.battlenet.com.cn'

  default-nameserver:
    - 114.114.114.114
    - 223.5.5.5
    - 1.1.1.1

  # é»˜è®¤èµ°å›½å†…æœ€å¿« DNSï¼ˆå›½å†…ç½‘ç«™ç§’å¼€ï¼‰
  nameserver:
    - 114.114.114.114
    - tls://223.5.5.5:853
    - https://doh.pub/dns-query          # è…¾è®¯å…¬å…± DoH å¤‡ç”¨

  # æ±¡æŸ“å…œåº•èµ°ä»£ç†åŠ å¯† DNSï¼ˆæœ€å¹²å‡€ï¼‰
  fallback:
    - https://1.1.1.1/dns-query#PROXY
    - https://dns.google/dns-query#PROXY

fallback-filter:
  geoip: true
  geoip-code: CN
  ipcidr:
    - 10.0.0.0/8
    - 127.0.0.1/8
    - 172.16.0.0/12
    - 192.168.0.0/16
    - 240.0.0.0/4
    - 119.29.29.29/32
    - 223.5.5.5/32
  # â† ä¸‹é¢è¿™ä¸‰è¡Œæ˜¯æ²»æ„ˆ Google çº¢å­—çš„ç»ˆæçµè¯
  domain:
    - '+.google.com'
    - '+.googleapis.com'
    - '+.gstatic.com'
    - '+.youtube.com'
    - '+.youtu.be'
    - '+.ytimg.com'  
    - '+.ggpht.com'
    - '+.gmail.com'

  nameserver-policy:
    'geosite:cn,private,apple,tencent,xiaomi,alipay':
      - 114.114.114.114
      - tls://223.5.5.5:853
    'geosite:geolocation-!cn':
      - https://1.1.1.1/dns-query#PROXY
      - https://dns.google/dns-query#PROXY
# ====================== è§„åˆ™é›†ï¼ˆä¿æŒæœ€æ–°ï¼‰======================
ruleset=ğŸ›‘ å¹¿å‘Šæ‹¦æˆª,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
ruleset=ğŸƒ åº”ç”¨å‡€åŒ–,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list
ruleset=ğŸ’° å¸äº¤æ˜“æ‰€,https://raw.githubusercontent.com/arb989822/bnok/refs/heads/main/BNOK.list
ruleset=ğŸ’¸ ææ³•å¸,https://raw.githubusercontent.com/arb989822/bnok/refs/heads/main/cex.list
ruleset=ğŸ“¹ æ²¹ç®¡è§†é¢‘,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list
ruleset=ğŸ“² Xç”µæŠ¥DC,https://raw.githubusercontent.com/arb989822/demo/refs/heads/main/Telegram.list
ruleset=ğŸ’¬ OpenAi,https://raw.githubusercontent.com/arb989822/demo/refs/heads/main/Ai.list
ruleset=ğŸ“¢ è°·æ­ŒBlock,[]DOMAIN-SUFFIX,developer.android.google.cn
ruleset=ğŸ“¢ è°·æ­ŒğŸ‡¨ğŸ‡³,[]DOMAIN-SUFFIX,xn--ngstr-lra8j.com
ruleset=ğŸ“¢ è°·æ­ŒğŸ‡¨ğŸ‡³,[]DOMAIN-SUFFIX,services.googleapis.cn
ruleset=ğŸ“¢ è°·æ­ŒğŸ‡¨ğŸ‡³,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleCNProxyIP.list
ruleset=ğŸ“¢ è°·æ­ŒğŸ‡¨ğŸ‡³,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleCN.list
ruleset=ğŸ“¢ è°·æ­Œ,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Google.list
ruleset=â“‚ï¸ å¾®è½¯Bing,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Bing.list
ruleset=â“‚ï¸ å¾®è½¯äº‘ç›˜,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/OneDrive.list
ruleset=â“‚ï¸ å¾®è½¯æœåŠ¡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list
ruleset=ğŸ è‹¹æœæœåŠ¡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list
ruleset=ğŸ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Steam.list
ruleset=ğŸ¥ å¥ˆé£è§†é¢‘,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list
ruleset=ğŸ“º å“”å“©å“”å“©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Bilibili.list
ruleset=ğŸŒ å›½å†…åª’ä½“,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list
ruleset=ğŸŒ å›½å¤–åª’ä½“,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list
ruleset=ğŸš€ èŠ‚ç‚¹é€‰æ‹©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list
ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=ğŸ¯ å…¨çƒç›´è¿,[]GEOIP,CN
ruleset=ğŸŸ æ¼ç½‘ä¹‹é±¼,[]FINAL

# ====================== åˆ†ç»„ï¼ˆå·²ä¼˜åŒ–æµ‹é€Ÿå‚æ•°ï¼‰=====================
custom_proxy_group=ğŸ’° å¸äº¤æ˜“æ‰€`url-test`(äº¤æ˜“)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=ğŸ’¸ ææ³•å¸`url-test`(å¤‡ç”¨)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=ğŸ“² Xç”µæŠ¥DC`url-test`(ç¤¾äº¤|é¦™æ¸¯|æ–°åŠ å¡|æ³•å›½)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=ğŸ“¹ æ²¹ç®¡è§†é¢‘`load-balance`round-robin`(æ²¹ç®¡)`http://www.gstatic.com/generate_204`180,200
custom_proxy_group=ğŸ’¬ OpenAi`url-test`(æ–°åŠ å¡|ç¾å›½)`https://chat.openai.com/cdn-cgi/trace`120,200,timeout=3000
custom_proxy_group=â™»ï¸ è‡ªåŠ¨é€‰æ‹©`url-test`(å¤‡ç”¨|é¦™æ¸¯|æ–°åŠ å¡|ç¾å›½|æ³•å›½)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=ğŸ“¢ è°·æ­ŒBlock`url-test`(æ–°åŠ å¡|ç¾å›½|æ³•å›½)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=ğŸ“¢ è°·æ­ŒğŸ‡¨ğŸ‡³`url-test`(æ–°åŠ å¡|ç¾å›½|æ³•å›½)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=ğŸ“¢ è°·æ­Œ`url-test`(æ–°åŠ å¡|ç¾å›½|æ³•å›½)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=â“‚ï¸ å¾®è½¯Bing`url-test`(é¦™æ¸¯|æ–°åŠ å¡|ç¾å›½|æ³•å›½)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=â“‚ï¸ å¾®è½¯äº‘ç›˜`url-test`(é¦™æ¸¯|æ–°åŠ å¡|ç¾å›½|æ³•å›½)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=â“‚ï¸ å¾®è½¯æœåŠ¡`url-test`(é¦™æ¸¯|æ–°åŠ å¡|ç¾å›½|æ³•å›½)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=ğŸ è‹¹æœæœåŠ¡`url-test`(é¦™æ¸¯|æ–°åŠ å¡|ç¾å›½|æ³•å›½)`http://www.gstatic.com/generate_204`60,,200
custom_proxy_group=ğŸš€ èŠ‚ç‚¹é€‰æ‹©`select`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]DIRECT`.*é¦™æ¸¯.*`.*æ–°åŠ å¡.*`.*ç¾å›½.*`.*æ³•å›½.*`.*æ²¹ç®¡.*
custom_proxy_group=ğŸ® æ¸¸æˆå¹³å°`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ¯ å…¨çƒç›´è¿`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`.*
custom_proxy_group=ğŸ¥ å¥ˆé£è§†é¢‘`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ¯ å…¨çƒç›´è¿`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`.*
custom_proxy_group=ğŸ“º å“”å“©å“”å“©`select`[]ğŸ¯ å…¨çƒç›´è¿`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`.*
custom_proxy_group=ğŸŒ å›½å†…åª’ä½“`select`[]ğŸ¯ å…¨çƒç›´è¿`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`.*
custom_proxy_group=ğŸŒ å›½å¤–åª’ä½“`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ¯ å…¨çƒç›´è¿`.*
custom_proxy_group=ğŸ¯ å…¨çƒç›´è¿`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©
custom_proxy_group=ğŸ›‘ å¹¿å‘Šæ‹¦æˆª`select`[]REJECT`[]DIRECT
custom_proxy_group=ğŸƒ åº”ç”¨å‡€åŒ–`select`[]REJECT`[]DIRECT
custom_proxy_group=ğŸŸ æ¼ç½‘ä¹‹é±¼`select`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ¯ å…¨çƒç›´è¿`[]DIRECT`.*
